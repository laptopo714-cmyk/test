# ๐ฌ ุฅุตูุงุญ ูุดููุฉ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู ุตูุญุงุช ุงูููุฏูู

## ๐จ ุงููุดููุฉ ุงูุชู ุชู ุญููุง

**ุงููุดููุฉ:**

- ูุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูุนูู ูู ุฌููุน ุงูุตูุญุงุช ุจูุง ูู ุฐูู ุตูุญุงุช ุงูููุฏูู
- ุนูุฏูุง ูููู ุงูุทุงูุจ ูุดุงูุฏ ููุฏููุ ูุญุฏุซ ุชุญุฏูุซ ุชููุงุฆู ููุตูุญุฉ ูู ุฏูููุฉ ุฃู 5 ุฏูุงุฆู
- ูุฐุง ูุคุฏู ุฅูู:
  - ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
  - ุฅุนุงุฏุฉ ุชุดุบูู ุงูููุฏูู ูู ุงูุจุฏุงูุฉ
  - ุชุดุชูุช ุชุฑููุฒ ุงูุทุงูุจ
  - ููุฏุงู ููุถุน ุงูุชุดุบูู ุงูุญุงูู

## ๐ฏ ุงูุญู ุงููุทุจู

### 1. ุฅุถุงูุฉ ุฏุงูุฉ ููุชุญูู ูู ุตูุญุฉ ุงูููุฏูู

```javascript
// ุฏุงูุฉ ููุชุญูู ูู ูุฌูุฏ ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู
// ุชููุน ุงูุชุญุฏูุซ ุงูุชููุงุฆู ุนูุฏูุง ูููู ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู
const isOnVideoPage = () => {
  const currentPath = window.location.pathname;
  const isVideoPage = currentPath.startsWith('/student/video/');

  if (isVideoPage) {
    console.log(
      '๐ฌ ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู:',
      currentPath,
      '- ุชู ุฅููุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู'
    );
  }

  return isVideoPage;
};
```

### 2. ุชุนุฏูู ุฌููุน ุงูู Intervals ููุชุญูู ูู ุตูุญุฉ ุงูููุฏูู

**ุชู ุชุนุฏูู 4 intervals ุฑุฆูุณูุฉ:**

#### ุฃ) ุชุญุฏูุซ ุงูุฌูุณุฉ (ูู 5 ุฏูุงุฆู):

```javascript
const sessionInterval = setInterval(() => {
  // ููุน ุงูุชุญุฏูุซ ุฅุฐุง ูุงู ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู ูุชุฌูุจ ุงููุทุงุน ุงููุดุงูุฏุฉ
  if (!isWatchingVideo && !isOnVideoPage()) {
    console.log('๐ ุชุญุฏูุซ ุงูุฌูุณุฉ...');
    validateSession();
  } else {
    console.log('๐ฌ ุชู ุชุฎุทู ุชุญุฏูุซ ุงูุฌูุณุฉ - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
  }
}, 5 * 60 * 1000);
```

#### ุจ) ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ (ูู 5 ุฏูุงุฆู):

```javascript
const studentDataInterval = setInterval(() => {
  // ููุน ุงูุชุญุฏูุซ ุฅุฐุง ูุงู ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู ูุชุฌูุจ ุงููุทุงุน ุงููุดุงูุฏุฉ
  if (!isWatchingVideo && !isOnVideoPage()) {
    console.log('๐ ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ...');
    refreshStudentData();
  } else {
    console.log('๐ฌ ุชู ุชุฎุทู ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
  }
}, 5 * 60 * 1000);
```

#### ุฌ) ุชุญุฏูุซ ุงูุฅุดุนุงุฑุงุช (ูู ุฏูููุฉ):

```javascript
const notificationInterval = setInterval(() => {
  // ููุน ุงูุชุญุฏูุซ ุฅุฐุง ูุงู ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู ูุชุฌูุจ ุงููุทุงุน ุงููุดุงูุฏุฉ
  if (!isWatchingVideo && !isOnVideoPage()) {
    console.log('๐ ุชุญุฏูุซ ุงูุฅุดุนุงุฑุงุช...');
    loadNotifications();
  } else {
    console.log('๐ฌ ุชู ุชุฎุทู ุชุญุฏูุซ ุงูุฅุดุนุงุฑุงุช - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
  }
}, 60 * 1000);
```

#### ุฏ) ุชุญุฏูุซ ุงูููุฏูููุงุช (ูู 5 ุฏูุงุฆู):

```javascript
const videoInterval = setInterval(() => {
  // ููุน ุงูุชุญุฏูุซ ุฅุฐุง ูุงู ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู ูุชุฌูุจ ุงููุทุงุน ุงููุดุงูุฏุฉ
  if (!isWatchingVideo && !isOnVideoPage()) {
    console.log('๐ ุชุญุฏูุซ ูุงุฆูุฉ ุงูููุฏูููุงุช...');
    loadStudentData();
  } else {
    console.log('๐ฌ ุชู ุชุฎุทู ุชุญุฏูุซ ุงูููุฏูููุงุช - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
  }
}, 5 * 60 * 1000);
```

### 3. ุญูุงูุฉ ุงูุฏูุงู ุงููุฑุฏูุฉ

ุชู ุฅุถุงูุฉ ุญูุงูุฉ ูุฌููุน ุงูุฏูุงู ุงูุชู ูุฏ ุชุณุจุจ ุชุญุฏูุซ ุงูุตูุญุฉ:

```javascript
// ุฌูุจ ุจูุงูุงุช ุงูุทุงูุจ
const loadStudentData = async () => {
  if (!student) return;

  // ุญูุงูุฉ ุฅุถุงููุฉ: ููุน ุงูุชุญุฏูุซ ุฃุซูุงุก ูุดุงูุฏุฉ ุงูููุฏูู
  if (isOnVideoPage()) {
    console.log('๐ฌ ุชู ููุน ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
    return;
  }
  // ุจุงูู ุงูููุฏ...
};

// ุฌูุจ ุงูุฅุดุนุงุฑุงุช
const loadNotifications = async () => {
  if (!student) return;

  // ุญูุงูุฉ ุฅุถุงููุฉ: ููุน ุงูุชุญุฏูุซ ุฃุซูุงุก ูุดุงูุฏุฉ ุงูููุฏูู
  if (isOnVideoPage()) {
    console.log('๐ฌ ุชู ููุน ุชุญุฏูุซ ุงูุฅุดุนุงุฑุงุช - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
    return;
  }
  // ุจุงูู ุงูููุฏ...
};

// ุงูุชุญูู ูู ุตุญุฉ ุงูุฌูุณุฉ
const validateSession = () => {
  // ุญูุงูุฉ ุฅุถุงููุฉ: ููุน ุงูุชุญูู ุฃุซูุงุก ูุดุงูุฏุฉ ุงูููุฏูู
  if (isOnVideoPage()) {
    console.log('๐ฌ ุชู ุชุฃุฌูู ุงูุชุญูู ูู ุงูุฌูุณุฉ - ุงูุทุงูุจ ูุดุงูุฏ ููุฏูู');
    return true;
  }
  // ุจุงูู ุงูููุฏ...
};
```

### 4. ูุฑุงูุจุฉ ุชุบููุฑ ุงููุณุงุฑ

```javascript
// ูุชุบูุฑ ูุชุชุจุน ุญุงูุฉ ูุดุงูุฏุฉ ุงูููุฏูู
const [isWatchingVideo, setIsWatchingVideo] = useState(false);

// ูุฑุงูุจุฉ ุชุบููุฑ ุงููุณุงุฑ ูุชุญุฏูุซ ุญุงูุฉ ูุดุงูุฏุฉ ุงูููุฏูู
useEffect(() => {
  const checkVideoPage = () => {
    const isVideoPage = window.location.pathname.startsWith('/student/video/');
    setIsWatchingVideo(isVideoPage);

    if (isVideoPage) {
      console.log('๐ฌ ุฏุฎู ุงูุทุงูุจ ุตูุญุฉ ููุฏูู - ุฅููุงู ุฌููุน ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ');
    } else {
      console.log('๐ฑ ุฎุฑุฌ ุงูุทุงูุจ ูู ุตูุญุฉ ุงูููุฏูู - ุชูุนูู ุงูุชุญุฏูุซุงุช ุงูุชููุงุฆูุฉ');
    }
  };

  // ูุญุต ุฃููู
  checkVideoPage();

  // ูุฑุงูุจุฉ ุชุบููุฑ ุงููุณุงุฑ
  const handleLocationChange = () => {
    setTimeout(checkVideoPage, 100); // ุชุฃุฎูุฑ ูุตูุฑ ููุชุฃูุฏ ูู ุชุญุฏูุซ ุงููุณุงุฑ
  };

  // ูุฑุงูุจุฉ ุฃุญุฏุงุซ ุงูุชููู
  window.addEventListener('popstate', handleLocationChange);

  // ูุฑุงูุจุฉ ุชุบููุฑ ุงููุณุงุฑ ูู ุซุงููุฉ ูุญู ุงุญุชูุงุทู
  const pathCheckInterval = setInterval(checkVideoPage, 1000);

  return () => {
    window.removeEventListener('popstate', handleLocationChange);
    clearInterval(pathCheckInterval);
  };
}, []);
```

## ๐ ููู ูุนูู ุงูุญู

### 1. ุงูุชุญูู ูู ุงููุณุงุฑ

- ูุชู ูุญุต `window.location.pathname`
- ุฅุฐุง ูุงู ุงููุณุงุฑ ูุจุฏุฃ ุจู `/student/video/` ููุฐุง ูุนูู ุฃู ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู

### 2. ููุน ุงูุชุญุฏูุซ ุงูุชููุงุฆู

- ุนูุฏ ุงูุชุดุงู ุฃู ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏููุ ูุชู ุชุฎุทู ุฌููุน ุนูููุงุช ุงูุชุญุฏูุซ ุงูุชููุงุฆู
- ูุชู ุทุจุงุนุฉ ุฑุณุงูุฉ ูู ุงููููุณูู ููุชุฃููุฏ: `๐ฌ ุงูุทุงูุจ ูู ุตูุญุฉ ููุฏูู - ุชู ุฅููุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู`

### 3. ุงุณุชูุฑุงุฑ ุงูุนูู ูู ุงูุตูุญุงุช ุงูุฃุฎุฑู

- ูู ุฌููุน ุงูุตูุญุงุช ุงูุฃุฎุฑูุ ูุณุชูุฑ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ุจุดูู ุทุจูุนู
- ูุง ูุชุฃุซุฑ ุฃุฏุงุก ุงููุธุงู ูู ุงูุตูุญุงุช ุงูุฃุฎุฑู

## โ ุงููุชุงุฆุฌ ุงููุญููุฉ

### ๐ฌ ูู ุตูุญุงุช ุงูููุฏูู:

- โ ูุง ูุญุฏุซ ุชุญุฏูุซ ุชููุงุฆู ููุตูุญุฉ
- โ ูุง ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูููุฏูู ูู ุงูุจุฏุงูุฉ
- โ ูุณุชุทูุน ุงูุทุงูุจ ูุดุงูุฏุฉ ุงูููุฏูู ุจุฏูู ุงููุทุงุน
- โ ูุชู ุงูุญูุงุธ ุนูู ููุถุน ุงูุชุดุบูู ุงูุญุงูู
- โ ุชุญุณูู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุจุดูู ูุจูุฑ

### ๐ฑ ูู ุงูุตูุญุงุช ุงูุฃุฎุฑู:

- โ ูุณุชูุฑ ุงูุชุญุฏูุซ ุงูุชููุงุฆู ุจุดูู ุทุจูุนู
- โ ูุชู ุชุญุฏูุซ ุงูุฅุดุนุงุฑุงุช ูู ุฏูููุฉ
- โ ูุชู ุชุญุฏูุซ ุจูุงูุงุช ุงูุทุงูุจ ูู 5 ุฏูุงุฆู
- โ ูุชู ุงูุชุญูู ูู ุตุญุฉ ุงูุฌูุณุฉ ูู 5 ุฏูุงุฆู

## ๐ก๏ธ ุงูุฃูุงู ูุงูุงุณุชูุฑุงุฑ

### 1. ุงูุญูุงุธ ุนูู ุงูุฃูุงู:

- ูุง ูุชุฃุซุฑ ุงูุชุญูู ูู ุตุญุฉ ุงูุฌูุณุฉ ูู ุงูุตูุญุงุช ุงูุฃุฎุฑู
- ูุชู ุงูุชุญูู ูู ุงูุชูุงุก ุงูุตูุงุญูุฉ ุนูุฏ ุงูุงูุชูุงู ูู ุตูุญุฉ ุงูููุฏูู
- ูุง ุชุชุฃุซุฑ ุขููุงุช ุงูุญูุงูุฉ ุงูุฃุฎุฑู

### 2. ุงูุฃุฏุงุก:

- ูุง ูุชู ุฅุฌุฑุงุก ุทูุจุงุช ุบูุฑ ุถุฑูุฑูุฉ ุฃุซูุงุก ูุดุงูุฏุฉ ุงูููุฏูู
- ุชูููู ุงุณุชููุงู ุงูุจูุงูุงุช ุฃุซูุงุก ุงููุดุงูุฏุฉ
- ุชุญุณูู ุงูุฃุฏุงุก ุงูุนุงู ููุชุทุจูู

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

- `src/contexts/StudentContext.js` - ุฅุถุงูุฉ ููุทู ููุน ุงูุชุญุฏูุซ ูู ุตูุญุงุช ุงูููุฏูู
- `VIDEO_AUTO_RELOAD_FIX.md` - ุชูุซูู ุงูุญู
- `TEST_VIDEO_AUTO_RELOAD.md` - ุฏููู ุงุฎุชุจุงุฑ ุงูุญู

## ๐ ุงูุฎูุงุตุฉ

ุชู ุญู ุงููุดููุฉ ุจูุฌุงุญ ูุน ุญูุงูุฉ ุดุงููุฉ! ุงูุขู ูููู ููุทูุงุจ ูุดุงูุฏุฉ ุงูููุฏูููุงุช ุจุฏูู ุฃู ุงููุทุงุน ุฃู ุฅุนุงุฏุฉ ุชุญูููุ ูุน ุงูุญูุงุธ ุนูู ุฌููุน ููุฒุงุช ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู ุจุงูู ุงูุตูุญุงุช.

**ุงูุญู ูุชุถูู:**

- โ ููุน ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู ุตูุญุงุช ุงูููุฏูู
- โ ุญูุงูุฉ ูู ุชุณุฌูู ุงูุฎุฑูุฌ ุฃุซูุงุก ุงููุดุงูุฏุฉ
- โ ูุฑุงูุจุฉ ูุณุชูุฑุฉ ูููุณุงุฑ
- โ ุฑุณุงุฆู ุชุฃููุฏ ูู ุงููููุณูู
- โ ุงุณุชูุฑุงุฑ ุงูุชุญุฏูุซ ูู ุงูุตูุญุงุช ุงูุฃุฎุฑู
